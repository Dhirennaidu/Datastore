<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-System CRUD</title>
    <style>
        /* ... (same CSS as before) ... */
    </style>
</head>
<body>
    <h1>Cross-System CRUD</h1>

    <div id="input-section">
        <h2>Add New Item</h2>
        <label for="name">Name:</label>
        <input type="text" id="name"><br><br>
        <label for="value">Value:</label>
        <input type="number" id="value"><br><br>
        <button onclick="addItem()">Add Item</button>
    </div>

    <div id="data-display">
        <h2>Items</h2>
        <ul id="data-list">
        </ul>
    </div>

    <div id="edit-form">
        <h2>Edit Item</h2>
        <form id="update-form">
            <input type="hidden" id="edit-id">
            <label for="edit-name">Name:</label>
            <input type="text" id="edit-name"><br><br>
            <label for="edit-value">Value:</label>
            <input type="number" id="edit-value"><br><br>
            <button type="button" onclick="updateItem()">Update Item</button>
            <button type="button" onclick="cancelEdit()">Cancel</button>
        </form>
    </div>

    <script src="your-baas-sdk.js"></script>
    <script>
        // Initialize your BaaS (replace with your provider's initialization)
// Example for a hypothetical 'BaaS' object:
// const baas = new BaasClient({ apiKey: 'YOUR_API_KEY' });
const collectionName = 'items';

// CREATE
async function addItem() {
    const nameInput = document.getElementById('name');
    const valueInput = document.getElementById('value');
    const name = nameInput.value.trim();
    const value = parseInt(valueInput.value);

    if (name) {
        try {
            const newItem = { name: name, value: value };
            const response = await baas.collection(collectionName).add(newItem);
            console.log('Item added:', response);
            nameInput.value = '';
            valueInput.value = '';
            fetchItems(); // Refresh the list
        } catch (error) {
            console.error('Error adding item:', error);
        }
    } else {
        alert('Please enter a name.');
    }
}

// READ (fetch all items from BaaS)
async function fetchItems() {
    dataList.innerHTML = '';
    try {
        const items = await baas.collection(collectionName).get();
        items.forEach(itemData => {
            const item = { id: itemData.id, ...itemData.data() };
            const listItem = document.createElement('li');
            listItem.innerHTML = `
                <span>${item.name}: ${item.value}</span>
                <div class="actions">
                    <button onclick="editItem('${item.id}')">Edit</button>
                    <button onclick="deleteItem('${item.id}')">Delete</button>
                </div>
            `;
            dataList.appendChild(listItem);
        });
    } catch (error) {
        console.error('Error fetching items:', error);
    }
}

// READ (fetch single item for editing)
async function getItem(id) {
    try {
        const doc = await baas.collection(collectionName).doc(id).get();
        if (doc.exists) {
            return { id: doc.id, ...doc.data() };
        } else {
            console.log('Item not found.');
            return null;
        }
    } catch (error) {
        console.error('Error fetching item:', error);
        return null;
    }
}

// UPDATE (show edit form)
async function editItem(id) {
    editForm.style.display = 'block';
    const item = await getItem(id);
    if (item) {
        document.getElementById('edit-name').value = item.name;
        document.getElementById('edit-value').value = item.value;
        document.getElementById('edit-id').value = item.id;
    } else {
        editForm.style.display = 'none';
    }
}

// UPDATE (submit updated data to BaaS)
async function updateItem() {
    const editNameInput = document.getElementById('edit-name');
    const editValueInput = document.getElementById('edit-value');
    const id = document.getElementById('edit-id').value;
    const updatedName = editNameInput.value.trim();
    const updatedValue = parseInt(editValueInput.value);

    if (updatedName) {
        try {
            await baas.collection(collectionName).doc(id).update({ name: updatedName, value: updatedValue });
            console.log('Item updated successfully.');
            editForm.style.display = 'none';
            fetchItems();
        } catch (error) {
            console.error('Error updating item:', error);
        }
    } else {
        alert('Please enter a name to update.');
    }
}

function cancelEdit() {
    editForm.style.display = 'none';
}

// DELETE
async function deleteItem(id) {
    if (confirm('Are you sure you want to delete this item?')) {
        try {
            await baas.collection(collectionName).doc(id).delete();
            console.log('Item deleted successfully.');
            fetchItems();
        } catch (error) {
            console.error('Error deleting item:', error);
        }
    }
}

// Initial fetch of data
fetchItems();

// Optional: Set up real-time listeners if your BaaS supports it
// baas.collection(collectionName).onSnapshot((snapshot) => {
//     console.log('Data changed:', snapshot);
//     fetchItems(); // Re-fetch data on changes
// });
    </script>
</body>
</html>
