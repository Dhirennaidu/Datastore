<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localStorage CRUD with JSON Array</title>
    <style>
        body { font-family: sans-serif; }
        #data-list { list-style: none; padding: 0; }
        #data-list li { border: 1px solid #ccc; padding: 10px; margin-bottom: 5px; }
        .actions button { margin-left: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>localStorage CRUD with JSON Array</h1>

    <div id="input-section">
        <h2>Add New Item</h2>
        <label for="name">Name:</label>
        <input type="text" id="name"><br><br>
        <label for="value">Value:</label>
        <input type="number" id="value"><br><br>
        <button onclick="addItem()">Add Item</button>
    </div>

    <div id="data-display">
        <h2>Items</h2>
        <ul id="data-list"></ul>
    </div>

    <script>
        const STORAGE_KEY = 'myAppData';

        function loadData() {
            const storedData = localStorage.getItem(STORAGE_KEY);
            return storedData ? JSON.parse(storedData) : [];
        }

        function saveData(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        let dataArray = loadData();
        console.log(dataArray);
        function generateId() {
            return Math.random().toString(36).substring(2, 15);
        }

        function displayData() {
            const dataList = document.getElementById('data-list');
            dataList.innerHTML = '';
            dataArray.forEach(item => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <span>${item.name}: ${item.value} (ID: ${item.id})</span>
                    <div class="actions">
                        <button onclick="editItem('${item.id}')">Edit</button>
                        <button onclick="deleteItem('${item.id}')">Delete</button>
                    </div>
                `;
                dataList.appendChild(listItem);
            });
        }

        function addItem() {
            const nameInput = document.getElementById('name');
            const valueInput = document.getElementById('value');
            const name = nameInput.value.trim();
            const value = parseInt(valueInput.value);

            if (name) {
                const newItem = { id: generateId(), name: name, value: value };
                dataArray.push(newItem);
                saveData(dataArray);
                nameInput.value = '';
                valueInput.value = '';
                displayData();
            } else {
                alert('Please enter a name.');
            }
        }

        function editItem(id) {
            const itemToEdit = dataArray.find(item => item.id === id);
            if (itemToEdit) {
                const nameInput = document.getElementById('name');
                const valueInput = document.getElementById('value');
                nameInput.value = itemToEdit.name;
                valueInput.value = itemToEdit.value;

                const addButton = document.querySelector('#input-section button');
                addButton.textContent = 'Update Item';
                addButton.onclick = function() {
                    updateItem(id);
                };
            }
        }

        function updateItem(id) {
            const nameInput = document.getElementById('name');
            const valueInput = document.getElementById('value');
            const name = nameInput.value.trim();
            const value = parseInt(valueInput.value);

            if (name) {
                dataArray = dataArray.map(item =>
                    item.id === id ? { ...item, name: name, value: value } : item
                );
                saveData(dataArray);
                nameInput.value = '';
                valueInput.value = '';
                const addButton = document.querySelector('#input-section button');
                addButton.textContent = 'Add Item';
                addButton.onclick = addItem;
                displayData();
            } else {
                alert('Please enter a name.');
            }
        }

        function deleteItem(id) {
            dataArray = dataArray.filter(item => item.id !== id);
            saveData(dataArray);
            displayData();
        }

        // Initial data load and display
        displayData();
    </script>
</body>
</html>
